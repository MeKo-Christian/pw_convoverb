# Repository Guidelines

## Project Structure & Module Organization

- `main.go` and `tui.go` host the CLI/TUI entry points and runtime wiring.
- `dsp/` contains the convolution reverb implementation and DSP helpers.
- `csrc/` holds the PipeWire C wrapper (`pw_wrapper.c/.h`) used via cgo.
- `internal/` and `pkg/` contain Go packages used by the binary.
- `cmd/` is reserved for additional Go entrypoints (if added).
- `assets/` and `web/` contain static assets and any UI/web resources.
- `scripts/` includes helper scripts used by the `justfile`.

## Build, Test, and Development Commands

- `just build` builds the C shared library and Go binary.
- `just run` builds and runs the reverb locally.
- `just test` runs all Go tests; `just test-unit` and `just test-integration` split suites.
- `just test-coverage` generates `coverage.html`.
- `just fmt` formats everything via `treefmt`.
- `just lint` runs `golangci-lint` with project config.
- Manual builds: `go generate` (build C lib) then `go build -o pw-convoverb`.

## Coding Style & Naming Conventions

- Go code is formatted with `gofumpt` and imports are ordered with `gci` (via `treefmt`).
- C code is formatted with `clang-format`.
- Prefer standard Go naming (PascalCase for exports, camelCase for locals).
- Keep complexity reasonable; linters enforce limits via `.golangci.toml`.

## Testing Guidelines

- Tests are Go `*_test.go` files; integration tests use `TestIntegrationâ€¦` naming.
- Run unit-only: `just test-unit`; integration-only: `just test-integration`.
- Coverage reports live at `coverage.html` (generated by `just test-coverage`).

## Commit & Pull Request Guidelines

- Commit messages follow a Conventional Commits style; recent examples include `feat:` and `fix:`.
- PRs should include a short summary, testing notes (commands run), and any relevant issue links.
- Add screenshots only when changing TUI or web assets.

## Configuration & Runtime Notes

- Runtime flags include `-ir`, `-wet`, `-dry`, `-no-tui`, `-debug`, and `-log`.
- PipeWire development headers are required for building (`libpipewire-0.3-dev`).
